---
export interface ImageInput {
  src: string;
  altText?: string;
  sourceType?: string;
}

export interface Props {
  imagePath?: string; // legacy usage
  image?: ImageInput; // newer usage
  altText?: string;
  twCSS?: string;
  maxWidth?: number | string;
}

const {
  imagePath,
  image,
  altText = "",
  twCSS = "",
  maxWidth,
} = Astro.props as Props;

const resolvedSrc = (image && image.src) || imagePath || "";
const resolvedAlt = (image && image.altText) || altText || "image";
const styleMax =
  typeof maxWidth !== "undefined"
    ? `max-width: ${typeof maxWidth === "number" ? maxWidth + "px" : maxWidth};`
    : "";
---

<img
  src={resolvedSrc}
  alt={resolvedAlt}
  loading="lazy"
  decoding="async"
  class={`block h-full w-full rounded-lg object-cover object-center ${twCSS}`}
  style={`${styleMax} width: 100%; height: auto;`}
/>
