---
import { SkiCycleRunConfig } from "skicyclerun.config";
import LinkButton from "./LinkButton.astro";
import socialIcons from "@assets/socialIcons";

export interface Props {
  centered?: boolean;
}

const { centered = false } = Astro.props;
---

<div class={`social-icons ${centered ? "flex" : ""}`}>
  {
    SkiCycleRunConfig.socials
      .filter((social) => social.active)
      .map((social) => (
        <LinkButton
          href={social.href}
          className="link-button"
          title={social.linkTitle}
          aria-label={social.linkTitle}
        >
          <span set:html={socialIcons[social.name]} />
        </LinkButton>
      ))
  }
</div>

<style>
  .social-icons {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-end;
    gap: 0.5rem;
  }

  /* Container style (targets the LinkButton component's <a> tag) */
  :global(.social-icons .link-button) {
    display: inline-block;
    position: relative;
    margin: 0 0.3rem;
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  /* SVG icon style */
  :global(.social-icons .icon-tabler) {
    fill: none;
    stroke: currentColor;
    stroke-width: 2.2;
    width: 1.5rem;
    height: 1.5rem;
    transition:
      transform 0.3s ease,
      stroke 0.3s ease,
      stroke-width 0.3s ease;
  }

  /* Hover animations */
  :global(.social-icons .link-button:hover) {
    transform: translateY(-3px);
  }

  :global(.social-icons .link-button:hover .icon-tabler) {
    stroke: rgb(var(--color-accent));
    stroke-width: 2.5;
    transform: rotate(8deg) translateX(-2px) scale(1.05);
  }

  /* Pulse effect */
  :global(.social-icons .link-button::after) {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--color-accent), 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
    transition:
      transform 0.4s ease-out,
      opacity 0.4s ease-out;
    z-index: -1;
    pointer-events: none;
  }

  :global(.social-icons .link-button:hover::after) {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0;
    animation: pulse 1.2s ease-out infinite;
  }

  @keyframes pulse {
    0% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 0.6;
    }
    100% {
      transform: translate(-50%, -50%) scale(1.8);
      opacity: 0;
    }
  }
</style>
