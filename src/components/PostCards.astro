---
// filepath: src/components/PostCards.astro
export interface Props {
  title: string;
  author: string;
  pubDatetime: string;
  tags: string[];
  description: string;
  cover?: string | { src: string }; // Accepts string or import object
  href: string;
}
const { title, author, pubDatetime, tags, description, cover, href } = Astro.props;

// Debug output
// console.log('[PostCards.astro] Rendering:', { title, cover, coverType: typeof cover, coverSrc: typeof cover === "object" && cover ? cover.src : cover });
---

<article
  class='mb-8 flex flex-row overflow-hidden rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-900'
>
  <div class='flex min-w-0 flex-1 flex-col justify-between p-6'>
    <div>
      <h2 class='card-title mb-2 truncate text-2xl font-bold text-gray-900 dark:text-white'>
        <a href={href} class='hover:underline'>{title}</a>
      </h2>
      <div class='mb-2 flex flex-wrap items-center text-sm text-gray-500 dark:text-gray-400'>
        <span>By {author}</span>
        <span class='mx-2'>â€¢</span>
        <time datetime={pubDatetime}>{new Date(pubDatetime).toLocaleDateString()}</time>
      </div>
      <p class='mb-4 line-clamp-3 text-gray-700 dark:text-gray-300'>
        {description}
      </p>
      <div class='flex flex-wrap gap-2'>
        {
          tags.map(tag => (
            <span class='rounded bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-200'>
              {tag}
            </span>
          ))
        }
      </div>
    </div>
  </div>
  <a
    href={href}
    class='hidden h-48 w-48 flex-shrink-0 items-center justify-center bg-gray-100 dark:bg-gray-800 sm:flex'
  >
    {
      cover ? (
        <img
          src={typeof cover === 'object' && cover && 'src' in cover ? cover.src : cover}
          alt={title}
          width={192}
          height={192}
          class='h-full w-full rounded-l-none rounded-r-lg object-cover'
        />
      ) : (
        <div class='flex h-full w-full items-center justify-center text-4xl text-gray-400 dark:text-gray-600'>
          <span>No Image</span>
        </div>
      )
    }
  </a>
</article>
